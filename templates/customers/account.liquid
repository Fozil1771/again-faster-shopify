<!-- /templates/customers/account.liquid -->

<!-- {% if customer.default_address %}
<h2>Address</h2>
<p>{{ customer.default_address.address1 }}</p>
{% if customer.default_address.address2 != "" %}
<p>{{ customer.default_address.address2 }}</p>
{% endif %}
<p>{{ customer.default_address.city}}, {% if address.province_code %}{{ customer.default_address.province_code }}, {%
  endif %}{{ customer.default_address.country }}</p>
<p>{{ customer.default_address.zip }}</p>
<p>{{ customer.default_address.phone }}</p>
{% endif %}

<div id="customer_orders">
  <h2>Orders</h2>
  {% paginate customer.orders by 10 %}
  {% if customer.orders.size != 0 %}
  {% for order in customer.orders %}
  <div class="order__item">
    <p class="order__item__number">{{ order.name }}</p>
    <p class="order__item__date">{{ order.created_at | date: "%d.%m.%Y" }}</p>
    <p class="order__item__status">{{ order.fulfillment_status }}</p>
    <p class="order__item__total-price">{{ order.total_price | money }}</p>
  </div>
  {% endfor %}
  {% else %}
  <p>You haven't placed any orders yet.</p>
  {% endif %}
  {{ paginate | default_pagination }}
  {% endpaginate %}
</div> -->




<div class="container">
  <section class="account-page">

    <menu class="menu-bar">
      <div class="menu-bar__title">
        <span>My Account</span>
      </div>
      <ul class="menu-bar__list">
        <li class="menu-item active" data-tab="1"><a href="#">Account Overview</a></li>
        <li class="menu-item" data-tab="2"><a href="#">Order Details</a></li>
        <li class="menu-item" data-tab="3"><a href="#">Address Book</a></li>
      </ul>
    </menu>
    <div class="account-content tab-body active" data-tab-body="1">
      <div class="orders-table">
        {% paginate customer.orders by 1 %}
        {% if customer.orders.size != 0 %}
        <div class="order">
          <div class="order-header">
            <p class="order-number order-header__title">Order Number</p>
            <p class="order-date order-header__title">Date</p>
            <p class="order-status order-header__title">Status</p>
            <p class="order-price order-header__title">Total</p>
          </div>

          {% for order in customer.orders %}

          <div class="order-body">
            <p class="order-body__item order-item__number">{{ order.name }}</p>
            <p class="order-body__item order-item__date">{{ order.created_at | date: "%d.%m.%Y" }}</p>
            <p class="order-body__item order-item__status">{{ order.fulfillment_status }}</p>
            <p class="order-body__item order-item__price">{{ order.total_price | money }}</p>
          </div>
          {% endfor %}
        </div>
        {% else %}
        <p>You haven't placed any orders yet.</p>
        {% endif %}
        <ul class="pagination">

          {% if paginate.pages > 1 %}
          {%- if paginate.previous -%}
          <li>
            <a href="{{ paginate.previous.url }}">
              Previous
            </a>
          </li>
          {%- else -%}

          <li class="visuallyhidden">
            Previous
          </li>
          {%- endif -%}

          <ul class="pagination-numbers">
            {%- for part in paginate.parts -%}
            {% if part.is_link %}
            <li>
              <a href="{{ part.url }}" class="pagination-num">
                {{ part.title }}
              </a>
            </li>
            {% else %}
            <li>
              <a href="{{ part.url }}" class="pagination-active">
                {{ part.title }}
              </a>
            </li>
            {% endif %}
            {%- endfor -%}
          </ul>


          {%- if paginate.next -%}
          <li>
            <a href="{{ paginate.next.url }}">
              Next
            </a>
          </li>
          {%- else -%}
          <li class="visuallyhidden">
            Next
          </li>
          {%- endif -%}
          {% endif %}
        </ul>
        {% endpaginate %}
      </div>

      <div class="address-book">

        <h2 class="address-book__title">Address Book</h2>

        <h4 class="address-book__user">{{ customer.first_name }} {{ customer.last_name }}</h4>
        <div class="address-book__content">
          <p>{{ customer.default_address.address1 }}</p>
          {% if customer.default_address.address2 != "" %}
          <p>{{ customer.default_address.address2 }}</p>
          {% endif %}
          <p>
            {{ customer.default_address.city}},
            {% if address.province_code %}
            {{ customer.default_address.province_code }},
            {% endif %}
            {{ customer.default_address.country }}</p>
          <p>{{ customer.default_address.zip }}</p>
          <p>{{ customer.default_address.phone }}</p>
        </div>

        <a href="" class="address-book__link">View Addresses</a>

      </div>
    </div>

    <div class="order-content tab-body" data-tab-body="2">Order Details</div>
    <div class="address-content tab-body" data-tab-body="3">Address Book</div>

  </section>

</div>


<script>
  console.log('works')
  let tabLinks = document.querySelectorAll('.menu-item')
  let tabContents = document.querySelectorAll('.tab-body')
  console.log(tabLinks.dataset)

  for (let i = 0; i < tabLinks.length; i++) {
    console.log(tabLinks[i].dataset.tab)



    tabLinks[i].addEventListener('click', (e) => {
      if (tabLinks[i].dataset.tab === tabContents[i].dataset.tabBody) {
        tabLinks[i].classList.add('active')
        tabContents[i].classList.add('active')
        console.log(tabLinks[i], tabContents[i])
      }
      e.target.parentElement.classList.remove('active')

      if (tabContents[i].classList.contains('active')) {
        tabContents[i].classList.remove('active')
      }


    })


  }

</script>